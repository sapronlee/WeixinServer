# = require angular/angular
# = require angular/angular-locale_zh-cn

# = require angularjs/rails/resource
# = require angular/libs/ng-table
# = require angular/libs/ng-table-params
# = require angular/libs/ui-bootstrap-tpls-0.4.0
# = require angular/libs/ui-utils
# = require angular/libs/angular-strap
# = require angular/libs/lb-breadcrumbs

# = require angular/services
# = require angular/controllers
# = require angular/directives

window.weixin = angular.module('weixin', ['weixin.services', 'weixin.controllers', 'weixin.directives', 'ngTable', 'ui.bootstrap', 'ui.utils', '$strap.directives', 'lbBreadcrumbs'])

window.weixin.config ['$httpProvider', ($httpProvider) ->
  $httpProvider.defaults.headers.common['X-CSRF-Token'] = document.getElementsByName("csrf-token")[0].content
  $httpProvider.defaults.headers.common['Accept'] = "application/json"
]

window.weixin.config ['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) ->
  $routeProvider
  .when '/',
    templateUrl: '<%= asset_path("home/index.html") %>',
    controller: 'HomeController'
  .when '/weixin/areas',
    templateUrl: '<%= asset_path("weixin/areas/index.html") %>',
    controller: 'WeixinAreasController'
  .when '/weixin/areas/new',
    templateUrl: '<%= asset_path("weixin/areas/new.html") %>',
    controller: 'WeixinAreasController'
  .when '/weixin/areas/:areaId/edit',
    templateUrl: '<%= asset_path("weixin/areas/edit.html") %>',
    controller: 'WeixinAreasController'
  .when '/weixin/messages',
    templateUrl: '<%= asset_path("weixin/messages/index.html") %>',
    controller: 'WeixinMessagesController'
  .when '/weixin/replies',
    templateUrl: '<%= asset_path("weixin/replies/index.html") %>',
    controller: 'WeixinRepliesController'
]